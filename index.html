<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ú–∞–≥–∞–∑–∏–Ω ‚Äî –º–∞–∫–µ—Ç –∑ —Ä–µ–∞–ª—å–Ω–æ—é –∞–¥–º—ñ–Ω–∫–æ—é</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:20px; background:#f5f5f5; }
    header { display:flex; gap:10px; align-items:center; margin-bottom:20px; }
    input, select, button { padding:6px; }
    .container { display:grid; grid-template-columns: 3fr 1fr; gap:20px; }
    .products { display:grid; grid-template-columns: repeat(auto-fill, minmax(150px,1fr)); gap:15px; }
    .product, .cart, .admin { background:#fff; padding:10px; border-radius:6px; box-shadow:0 2px 5px rgba(0,0,0,.1); }
    .hidden { display:none; }
  </style>
</head>
<body>

<header>
  <h1>–ú–∞–≥–∞–∑–∏–Ω</h1>
  <input id="search" placeholder="–ü–æ—à—É–∫" />
  <select id="filter">
    <option value="">–£—Å—ñ</option>
    <option value="tech">–¢–µ—Ö–Ω—ñ–∫–∞</option>
    <option value="other">–Ü–Ω—à–µ</option>
  </select>
</header>

<div class="container">
  <div class="products" id="products"></div>
  <div class="cart">
    <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
    <ul id="cart"></ul>
    <strong id="total"></strong>
  </div>
</div>

<div class="admin" id="loginBox">
  <h3>–í—Ö—ñ–¥ –≤ –∞–¥–º—ñ–Ω–∫—É</h3>
  <input id="adminCode" placeholder="–ö–æ–¥ –¥–æ—Å—Ç—É–ø—É" />
  <button onclick="loginAdmin()">–£–≤—ñ–π—Ç–∏</button>
  <p id="loginStatus"></p>
</div>

<div class="admin hidden" id="adminPanel">
  <h3>–ê–¥–º—ñ–Ω–∫–∞</h3>
  <input id="name" placeholder="–ù–∞–∑–≤–∞" />
  <input id="price" type="number" placeholder="–¶—ñ–Ω–∞" />
  <select id="category">
    <option value="tech">–¢–µ—Ö–Ω—ñ–∫–∞</option>
    <option value="other">–Ü–Ω—à–µ</option>
  </select>
  <button onclick="addProduct()">–î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</button>
</div>

<script>
// üî• Firebase (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞, –≤—Å—ñ –±–∞—á–∞—Ç—å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
var firebaseConfig = {
  apiKey: "demo",
  authDomain: "demo.firebaseapp.com",
  databaseURL: "https://demo.firebaseio.com",
  projectId: "demo",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database().ref('products');

const ADMIN_CODE = '1234';
let cart = [];
let products = [];

function loginAdmin() {
  if (adminCode.value === ADMIN_CODE) {
    adminPanel.classList.remove('hidden');
    loginBox.classList.add('hidden');
  } else loginStatus.textContent = '–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥';
}

function renderProducts() {
  productsEl.innerHTML = '';
  const s = search.value.toLowerCase();
  const f = filter.value;
  products.filter(p => p.name.toLowerCase().includes(s) && (!f || p.category===f))
    .forEach(p => {
      const d = document.createElement('div');
      d.className = 'product';
      d.innerHTML = `<h4>${p.name}</h4><p>${p.price} –≥—Ä–Ω</p><button>–í –∫–æ—Ä–∑–∏–Ω—É</button>`;
      d.querySelector('button').onclick = () => { cart.push(p); renderCart(); };
      productsEl.appendChild(d);
    });
}

function renderCart() {
  cartEl.innerHTML = '';
  let sum = 0;
  cart.forEach(p => { sum+=p.price; cartEl.innerHTML += `<li>${p.name}</li>`; });
  total.textContent = '–†–∞–∑–æ–º: ' + sum + ' –≥—Ä–Ω';
}

function addProduct() {
  const product = {
    name: name.value,
    price: +price.value,
    category: category.value
  };
  db.push(product);
}

// üîÑ –†–µ–∞–ª—å–Ω–∏–π realtime-–∞–ø–¥–µ–π—Ç –¥–ª—è –í–°–Ü–•
const productsEl = document.getElementById('products');
const cartEl = document.getElementById('cart');
const total = document.getElementById('total');
const search = document.getElementById('search');
const filter = document.getElementById('filter');

db.on('value', snap => {
  products = snap.val() ? Object.values(snap.val()) : [];
  renderProducts();
});

search.oninput = filter.onchange = renderProducts;
</script>

</body>
</html>
